/* ── Settings View Layout ───────────────────────────────── */
.settings-view {
  padding: 24px 0;
  max-width: 960px;
}

.settings-header {
  margin-bottom: 24px;
}
.settings-header h1 {
  font-size: 28px; font-weight: 700; color: #1a202c; margin: 0 0 6px;
}
.settings-subtitle { color: #718096; font-size: 15px; margin: 0; }

/* Top-level tab bar */
.settings-tabs {
  display: flex; gap: 4px; margin-bottom: 24px;
  border-bottom: 2px solid #e2e8f0; padding-bottom: 0;
}
.settings-tab {
  display: flex; align-items: center; gap: 8px;
  padding: 12px 20px; border: none; background: none; cursor: pointer;
  font-size: 15px; font-weight: 500; color: #718096;
  border-bottom: 3px solid transparent; margin-bottom: -2px;
  transition: all 0.15s; border-radius: 6px 6px 0 0;
}
.settings-tab:hover { color: #2d3748; background: #f7fafc; }
.settings-tab.active { color: #667eea; border-bottom-color: #667eea; }
.settings-tab-icon { font-size: 18px; }

/* Panel */
.sv-panel { background: white; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden; }
.sv-panel-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  padding: 24px; border-bottom: 1px solid #e2e8f0; gap: 16px;
}
.sv-panel-header h2 { margin: 0 0 6px; font-size: 20px; font-weight: 600; color: #1a202c; }
.sv-panel-desc { margin: 0; font-size: 14px; color: #718096; line-height: 1.5; max-width: 560px; }

/* Inner tabs (for Deal Health) */
.sv-inner-tabs {
  display: flex; gap: 0; border-bottom: 1px solid #e2e8f0;
  padding: 0 24px; overflow-x: auto; background: #fafafa;
}
.sv-inner-tab {
  padding: 10px 14px; border: none; background: none; cursor: pointer;
  font-size: 13px; font-weight: 500; color: #718096; white-space: nowrap;
  border-bottom: 2px solid transparent; margin-bottom: -1px;
  transition: all 0.15s;
}
.sv-inner-tab:hover { color: #374151; }
.sv-inner-tab.active { color: #667eea; border-bottom-color: #667eea; }

.sv-panel-body { padding: 24px; }
.sv-section { display: flex; flex-direction: column; gap: 16px; }
.sv-loading { padding: 48px; text-align: center; color: #718096; font-size: 15px; }
.sv-hint { font-size: 13px; color: #718096; margin: 0; line-height: 1.5; }
.sv-hint-bottom { margin-top: 12px; }
.sv-hint code { background: #f3f4f6; padding: 1px 5px; border-radius: 4px; font-size: 12px; }
.sv-empty { text-align: center; padding: 32px; color: #a0aec0; font-size: 14px; font-style: italic; }

/* Cards */
.sv-card {
  padding: 16px 20px; background: #f9fafb;
  border: 1px solid #e2e8f0; border-radius: 10px;
}
.sv-card h3 { margin: 0 0 6px; font-size: 15px; font-weight: 600; color: #1a202c; }
.sv-card h4 { margin: 0 0 4px; font-size: 14px; font-weight: 600; color: #374151; }

/* Status messages */
.sv-error {
  margin: 0 24px 16px; padding: 12px 16px; background: #fff5f5;
  border: 1px solid #fed7d7; border-radius: 8px; color: #c53030; font-size: 14px;
}
.sv-success {
  margin: 0 24px 16px; padding: 12px 16px; background: #f0fff4;
  border: 1px solid #c6f6d5; border-radius: 8px; color: #276749; font-size: 14px;
}

/* ── AI Usage ──────────────────────────────────────────── */
.sv-ai-master {
  display: flex; gap: 16px; justify-content: space-between; align-items: flex-start;
  padding: 20px; border-radius: 10px; border: 2px solid;
}
.sv-ai-master.enabled  { background: #f0fff4; border-color: #9ae6b4; }
.sv-ai-master.disabled { background: #fffaf0; border-color: #fbd38d; }
.sv-ai-master-left  { flex: 1; }
.sv-ai-master-right { display: flex; flex-direction: column; align-items: center; gap: 6px; flex-shrink: 0; }
.sv-ai-title  { font-size: 16px; font-weight: 600; color: #1a202c; margin-bottom: 6px; }
.sv-ai-desc   { font-size: 14px; color: #4a5568; margin: 0 0 10px; line-height: 1.5; }
.sv-ai-cost   { font-size: 13px; color: #2b6cb0; background: #ebf8ff; padding: 6px 10px; border-radius: 6px; display: inline-block; }
.sv-count-badge { font-size: 12px; font-weight: 600; background: #667eea; color: white; padding: 2px 8px; border-radius: 999px; margin-left: 8px; }

/* Toggle */
.sv-toggle {
  width: 52px; height: 28px; border-radius: 999px; border: none; cursor: pointer;
  position: relative; transition: background 0.2s; padding: 0;
}
.sv-toggle.on  { background: #48bb78; }
.sv-toggle.off { background: #cbd5e0; }
.sv-toggle-knob {
  position: absolute; top: 3px; width: 22px; height: 22px;
  background: white; border-radius: 50%; transition: left 0.2s;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
.sv-toggle.on  .sv-toggle-knob { left: 27px; }
.sv-toggle.off .sv-toggle-knob { left: 3px; }
.sv-toggle-label { font-size: 13px; font-weight: 600; color: #4a5568; }

.sv-ai-param-list { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.sv-ai-param-row {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 14px; background: white; border: 1px solid #e2e8f0; border-radius: 8px;
}
.sv-ai-param-row.muted { opacity: 0.5; }
.sv-ai-param-cat  { font-size: 16px; flex-shrink: 0; }
.sv-ai-param-info { flex: 1; display: flex; flex-direction: column; gap: 2px; }
.sv-ai-param-label  { font-size: 14px; color: #1a202c; font-weight: 500; }
.sv-ai-param-method { font-size: 12px; color: #718096; }

/* ── Parameters Tab ─────────────────────────────────────── */
.sv-param-group { background: #f9fafb; border: 1px solid #e2e8f0; border-radius: 10px; overflow: hidden; }
.sv-param-group-header {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 16px; background: #f0f4f8; border-bottom: 1px solid #e2e8f0;
  font-size: 14px;
}
.sv-param-group-title { font-weight: 600; color: #374151; flex: 1; }
.sv-param-group-count { font-size: 12px; color: #a0aec0; }

.sv-param-card { border-bottom: 1px solid #e2e8f0; background: white; transition: opacity 0.15s; }
.sv-param-card:last-child { border-bottom: none; }
.sv-param-card.inactive { opacity: 0.55; }
.sv-param-card-top { display: flex; align-items: center; gap: 12px; padding: 10px 16px; }
.sv-param-card-info { flex: 1; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; cursor: pointer; }
.sv-param-card-label { font-size: 14px; color: #1a202c; font-weight: 500; }
.sv-param-badges { display: flex; gap: 6px; flex-wrap: wrap; }
.sv-expand-btn { background: none; border: none; cursor: pointer; color: #a0aec0; font-size: 12px; padding: 4px; border-radius: 4px; }
.sv-expand-btn:hover { background: #f3f4f6; color: #374151; }

/* Toggle pill (Parameters) */
.sv-param-toggle { position: relative; display: inline-block; width: 36px; height: 20px; flex-shrink: 0; }
.sv-param-toggle input { opacity: 0; width: 0; height: 0; }
.sv-param-slider { position: absolute; cursor: pointer; inset: 0; background: #cbd5e0; border-radius: 999px; transition: 0.2s; }
.sv-param-toggle input:checked + .sv-param-slider { background: #667eea; }
.sv-param-slider:before { content: ''; position: absolute; width: 14px; height: 14px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
.sv-param-toggle input:checked + .sv-param-slider:before { transform: translateX(16px); }

/* Expanded detail */
.sv-param-detail { padding: 12px 16px 16px 64px; background: #fafafa; border-top: 1px solid #f3f4f6; }
.sv-param-desc { font-size: 14px; color: #4a5568; margin: 0 0 12px; line-height: 1.5; }
.sv-param-meta { display: flex; flex-direction: column; gap: 8px; }
.sv-meta-row { display: flex; gap: 12px; align-items: flex-start; }
.sv-meta-label { font-size: 12px; font-weight: 600; color: #a0aec0; text-transform: uppercase; letter-spacing: 0.05em; width: 120px; flex-shrink: 0; padding-top: 2px; }
.sv-meta-val { font-size: 13px; color: #4a5568; }
.sv-meta-val.positive { color: #38a169; }
.sv-meta-val.negative { color: #e53e3e; }
.sv-meta-warning { font-size: 13px; color: #744210; background: #fefcbf; padding: 6px 10px; border-radius: 6px; }
.sv-weight-inline { display: flex; align-items: center; gap: 6px; }
.sv-weight-inline input { width: 64px; padding: 4px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; text-align: right; }

/* ── Weights Tab ─────────────────────────────────────────── */
.sv-weight-total { font-size: 14px; font-weight: normal; margin-left: 8px; }
.sv-weight-total.ok    { color: #38a169; }
.sv-weight-total.error { color: #e53e3e; }
.sv-cat-grid { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.sv-cat-row { display: flex; align-items: center; gap: 10px; }
.sv-cat-row label { flex: 1; font-size: 14px; color: #374151; }
.sv-weight-input { display: flex; align-items: center; gap: 4px; }
.sv-weight-input input { width: 64px; padding: 6px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; text-align: right; }
.sv-weight-input span { font-size: 13px; color: #718096; }
.sv-threshold-grid { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.sv-threshold-row { display: flex; align-items: center; gap: 10px; }
.sv-health-dot { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; }
.sv-health-dot.healthy { background: #48bb78; }
.sv-health-dot.watch   { background: #ed8936; }
.sv-health-dot.risk    { background: #fc8181; }
.sv-threshold-row label { font-size: 14px; color: #374151; width: 80px; }
.sv-threshold-row input { width: 64px; padding: 6px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; text-align: right; }

/* ── Title Keywords ─────────────────────────────────────── */
.sv-tags { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; margin-top: 10px; }
.sv-tag { display: flex; align-items: center; gap: 4px; }
.sv-tag input { padding: 4px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px; width: 130px; }
.sv-tag button { background: none; border: none; cursor: pointer; color: #a0aec0; font-size: 16px; line-height: 1; padding: 0 2px; }
.sv-tag button:hover { color: #fc8181; }
.sv-add-tag { background: none; border: 1px dashed #cbd5e0; border-radius: 6px; padding: 4px 12px; font-size: 13px; cursor: pointer; color: #718096; }
.sv-add-tag:hover { border-color: #667eea; color: #667eea; }

/* ── Segments ────────────────────────────────────────────── */
.sv-seg-grid { display: flex; flex-direction: column; gap: 10px; margin-top: 12px; }
.sv-seg-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; }
.sv-seg-row label { font-size: 14px; color: #374151; font-weight: 500; margin: 0 0 2px; display: block; }
.sv-seg-row input { width: 100px; padding: 6px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; text-align: right; flex-shrink: 0; }

/* ── Competitors ─────────────────────────────────────────── */
.sv-comp-form { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
.sv-comp-form input { flex: 1; min-width: 160px; padding: 8px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px; }
.sv-comp-list { display: flex; flex-direction: column; gap: 8px; }
.sv-comp-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; }
.sv-comp-info { display: flex; flex-direction: column; gap: 2px; }
.sv-comp-name { font-weight: 600; font-size: 15px; color: #1a202c; }
.sv-comp-aliases { font-size: 13px; color: #718096; }
.sv-comp-website { font-size: 13px; color: #667eea; }
.sv-comp-actions { display: flex; gap: 8px; }
.sv-comp-edit { display: flex; flex-direction: column; gap: 8px; width: 100%; }
.sv-comp-edit input { padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; }
.sv-comp-edit-btns { display: flex; gap: 8px; }

/* ── Playbook ────────────────────────────────────────────── */
.sv-form-grid { display: flex; flex-direction: column; gap: 10px; margin-top: 12px; }
.sv-form-row { display: flex; gap: 12px; align-items: flex-start; }
.sv-form-row label { width: 160px; flex-shrink: 0; font-size: 13px; font-weight: 600; color: #718096; text-transform: capitalize; padding-top: 8px; }
.sv-form-row input, .sv-form-row textarea {
  flex: 1; padding: 7px 10px; border: 1px solid #e2e8f0; border-radius: 7px;
  font-size: 14px; color: #1a202c; background: white; resize: vertical;
}
.sv-form-row input:focus, .sv-form-row textarea:focus { outline: none; border-color: #667eea; }

.sv-stages-list { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.sv-stage-row { border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden; }
.sv-stage-header { display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; background: white; transition: background 0.15s; }
.sv-stage-header:hover { background: #f7fafc; }
.sv-stage-num { width: 24px; height: 24px; background: #667eea; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; flex-shrink: 0; }
.sv-stage-name { font-weight: 600; color: #1a202c; font-size: 14px; min-width: 100px; }
.sv-stage-header .sv-hint { flex: 1; }
.sv-stage-detail { padding: 16px; background: #fafafa; border-top: 1px solid #e2e8f0; }

/* ── Prompts ─────────────────────────────────────────────── */
.sv-prompt-tabs { display: flex; gap: 8px; margin-bottom: 16px; }
.sv-prompt-tab { padding: 8px 18px; border: 1px solid #e2e8f0; border-radius: 8px; background: white; cursor: pointer; font-size: 14px; font-weight: 500; color: #718096; transition: all 0.15s; }
.sv-prompt-tab:hover  { border-color: #667eea; color: #667eea; }
.sv-prompt-tab.active { background: #667eea; border-color: #667eea; color: white; }
.sv-prompt-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; gap: 16px; }
.sv-prompt-header h3 { margin: 0 0 4px; }
.sv-prompt-editor {
  width: 100%; min-height: 480px; padding: 14px; box-sizing: border-box;
  border: 1px solid #e2e8f0; border-radius: 8px;
  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
  font-size: 13px; line-height: 1.6; color: #1a202c;
  background: #1e1e2e; color: #cdd6f4;
  resize: vertical;
}
.sv-prompt-editor:focus { outline: none; border-color: #667eea; }

/* ── Badges ──────────────────────────────────────────────── */
.sv-badge { font-size: 11px; padding: 2px 8px; border-radius: 999px; font-weight: 500; white-space: nowrap; }
.sv-badge.pos     { background: #c6f6d5; color: #276749; }
.sv-badge.neg     { background: #fed7d7; color: #742a2a; }
.sv-badge.auto    { background: #bee3f8; color: #2c5282; }
.sv-badge.ai      { background: #e9d8fd; color: #553c9a; }
.sv-badge.ai-off  { background: #edf2f7; color: #718096; }
.sv-badge.manual  { background: #fefcbf; color: #744210; }
.sv-badge.warning { background: #fefcbf; color: #744210; }

/* ── Buttons ─────────────────────────────────────────────── */
.sv-btn-primary {
  padding: 9px 20px; background: #667eea; color: white;
  border: none; border-radius: 8px; font-size: 14px; font-weight: 600;
  cursor: pointer; transition: background 0.15s; white-space: nowrap; flex-shrink: 0;
}
.sv-btn-primary:hover:not(:disabled) { background: #5a67d8; }
.sv-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
.sv-btn-secondary {
  padding: 9px 20px; background: white; color: #4a5568;
  border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;
  font-weight: 500; cursor: pointer; transition: all 0.15s; white-space: nowrap;
}
.sv-btn-secondary:hover { background: #f7fafc; border-color: #cbd5e0; }
.sv-icon-btn { background: none; border: none; cursor: pointer; font-size: 16px; padding: 4px; border-radius: 4px; }
.sv-icon-btn:hover { background: #f7fafc; }

.sv-stage-goal { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ── Integrations Tab ────────────────────────────────────── */
.sv-integration-card {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sv-integration-card--disabled {
  opacity: 0.5;
  pointer-events: none;
}

.sv-integration-header {
  display: flex;
  align-items: flex-start;
  gap: 14px;
}

.sv-integration-logo {
  font-size: 2rem;
  line-height: 1;
  flex-shrink: 0;
  margin-top: 2px;
}

.sv-integration-header h3 {
  margin: 0 0 4px;
  font-size: 15px;
  font-weight: 600;
  color: #1a202c;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sv-badge-soon {
  font-size: 11px;
  font-weight: 600;
  background: #edf2f7;
  color: #718096;
  border: 1px solid #e2e8f0;
  border-radius: 999px;
  padding: 2px 8px;
}

.sv-integration-scopes {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px 16px;
}

.sv-integration-scopes .sv-hint {
  margin-bottom: 8px;
}

.sv-scope-list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sv-scope-list li {
  font-size: 13px;
  color: #4a5568;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* ═══════════════════════════════════════════════════════════════
   Multi-Playbook UI
   ═══════════════════════════════════════════════════════════════ */

.pb-layout {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 20px;
  margin-top: 20px;
  align-items: start;
}

@media (max-width: 768px) {
  .pb-layout { grid-template-columns: 1fr; }
}

/* Sidebar list */
.pb-sidebar {
  background: white;
  border-radius: 10px;
  border: 1px solid #e2e8f0;
  overflow: hidden;
}

.pb-list-item {
  padding: 12px 14px;
  cursor: pointer;
  border-bottom: 1px solid #f0f4f8;
  transition: background 0.15s;
}
.pb-list-item:last-child { border-bottom: none; }
.pb-list-item:hover      { background: #f7fafc; }
.pb-list-item.active     { background: #ebf4ff; border-left: 3px solid #3182ce; }

.pb-list-item-main {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 3px;
}
.pb-list-name {
  font-weight: 600;
  font-size: 13px;
  color: #2d3748;
  flex: 1;
}
.pb-default-star {
  color: #d69e2e;
  font-size: 14px;
}
.pb-list-meta {
  font-size: 11px;
  color: #718096;
}
.pb-list-actions {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}
.sv-btn-link {
  background: none;
  border: none;
  padding: 0;
  font-size: 12px;
  color: #3182ce;
  cursor: pointer;
  text-decoration: underline;
}
.sv-btn-link:hover    { color: #2c5282; }
.sv-btn-link.sv-btn-danger        { color: #e53e3e; }
.sv-btn-link.sv-btn-danger:hover  { color: #c53030; }

/* Editor pane */
.pb-editor {
  min-width: 0;
}
.pb-editor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e2e8f0;
}

/* Type badge */
.pb-type-badge {
  font-size: 12px;
  font-weight: 600;
}

/* Default badge (in editor header) */
.pb-default-badge {
  font-size: 11px;
  font-weight: 700;
  background: #fefcbf;
  color: #744210;
  padding: 2px 8px;
  border-radius: 10px;
  border: 1px solid #f6e05e;
}

/* New playbook form card */
.pb-new-form {
  margin-bottom: 20px;
}
.sv-form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media (max-width: 600px) {
  .sv-form-grid { grid-template-columns: 1fr; }
}

/* ── Company Context collapsible header ──────────────────────── */
.pb-company-header {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  font-size: 15px;
  font-weight: 600;
  color: #2d3748;
  user-select: none;
}
.pb-company-header:hover { color: #1a202c; }
.pb-company-summary {
  font-size: 13px;
  font-weight: 400;
  color: #718096;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ── Key action rows ─────────────────────────────────────────── */
.pb-action-row {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 8px;
}
.pb-action-num {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  background: #edf2f7;
  color: #4a5568;
  border-radius: 50%;
  font-size: 11px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 8px;
}
.pb-action-text {
  flex: 1;
  font-size: 14px;
  color: #2d3748;
  line-height: 1.5;
  padding: 6px 0;
  white-space: normal;
  word-break: break-word;
}
.pb-action-textarea {
  flex: 1;
  resize: none;
  line-height: 1.5;
  min-height: 36px;
  overflow: hidden;
}
